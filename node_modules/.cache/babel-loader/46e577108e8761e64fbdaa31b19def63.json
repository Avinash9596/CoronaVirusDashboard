{"ast":null,"code":"import _regeneratorRuntime from\"/Users/matchajanardhanarao/Documents/coronodashboard/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/matchajanardhanarao/Documents/coronodashboard/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"/Users/matchajanardhanarao/Documents/coronodashboard/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/matchajanardhanarao/Documents/coronodashboard/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/Users/matchajanardhanarao/Documents/coronodashboard/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/matchajanardhanarao/Documents/coronodashboard/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React from'react';import{ProgressBar}from'primereact/progressbar';var nf=new Intl.NumberFormat();var AffectedCountries=/*#__PURE__*/function(_React$Component){_inherits(AffectedCountries,_React$Component);var _super=_createSuper(AffectedCountries);function AffectedCountries(props){var _this;_classCallCheck(this,AffectedCountries);_this=_super.call(this);_this.state={data:[],name:'Countries',url:props.url};return _this;}_createClass(AffectedCountries,[{key:\"componentWillReceiveProps\",value:function componentWillReceiveProps(props){if(props.refresh)this.getData(props.presentRegion);}},{key:\"componentDidMount\",value:function componentDidMount(){//SHOW THE WORLD DATA \nthis.getData(this.props.presentRegion);}},{key:\"getData\",value:function(){var _getData=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(region){var _this2=this;var url;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:url=\"\";if(region==='World')url=\"https://coronavirus-19-api.herokuapp.com/countries\";else url=\"https://covid-india-cases.herokuapp.com/states/\";_context.next=4;return fetch(url).then(function(response){return response.json();}).then(function(data){_this2.sortData(data,region);});case 4:case\"end\":return _context.stop();}}},_callee);}));function getData(_x){return _getData.apply(this,arguments);}return getData;}()},{key:\"sortData\",value:function sortData(data,region){var totalCases=0;var obj=[],name=\"\";if(region==='World'){name=\"Countries\";totalCases=data.splice(0,1);obj=data.splice(0,5);obj.forEach(function(element){element[\"percentage\"]=element.cases/totalCases[0].cases*100;element[\"place\"]=element.country;});}else{var ar=[];data.forEach(function(x){ar.push(parseInt(x.noOfCases));totalCases+=x.noOfCases;// obj.push({\"place\": x.state,\"cases\":x.noOfCases})\n});ar.sort(function(a,b){return b-a;});ar.forEach(function(x){data.forEach(function(elem){if(elem.noOfCases==x)obj.push({place:elem.state,cases:x,percentage:x/totalCases*100});});});obj=obj.splice(0,5);name=\"States\";}this.setState({data:obj,name:name});}},{key:\"render\",value:function render(){return/*#__PURE__*/React.createElement(\"div\",{className:\"col-xl-3 col-md-4\"},/*#__PURE__*/React.createElement(\"div\",{className:\"card\",style:{height:'360px'}},/*#__PURE__*/React.createElement(\"div\",{className:\"card-header\"},\"5 Most Affected \",this.state.name),/*#__PURE__*/React.createElement(\"div\",{className:\"card-body\"},this.state.data.map(function(name){return/*#__PURE__*/React.createElement(\"div\",{key:name.country},/*#__PURE__*/React.createElement(\"span\",{style:{float:'left'}},name.place),\"  \",/*#__PURE__*/React.createElement(\"span\",{style:{float:\"right\"}},name.cases.toLocaleString()),/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(ProgressBar,{value:name.percentage,showValue:false,style:{height:'5px'}}),/*#__PURE__*/React.createElement(\"br\",null));}))));}}]);return AffectedCountries;}(React.Component);export default AffectedCountries;","map":{"version":3,"sources":["/Users/matchajanardhanarao/Documents/coronodashboard/src/components/AffectedCountries.js"],"names":["React","ProgressBar","nf","Intl","NumberFormat","AffectedCountries","props","state","data","name","url","refresh","getData","presentRegion","region","fetch","then","response","json","sortData","totalCases","obj","splice","forEach","element","cases","country","ar","x","push","parseInt","noOfCases","sort","a","b","elem","place","percentage","setState","height","map","float","toLocaleString","Component"],"mappings":"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","sourcesContent":["import React from 'react';\r\nimport {ProgressBar} from 'primereact/progressbar';\r\n\r\nconst nf = new Intl.NumberFormat();\r\n\r\nclass AffectedCountries extends React.Component\r\n{\r\n    constructor(props)\r\n    {\r\n        super();\r\n        this.state={\r\n           data:[],\r\n           name:'Countries',\r\n           url:props.url\r\n        }\r\n    }\r\n\r\n    componentWillReceiveProps(props)\r\n    {\r\n      if(props.refresh)this.getData(props.presentRegion);\r\n    }\r\n\r\n    componentDidMount()\r\n    {\r\n       //SHOW THE WORLD DATA \r\n       this.getData(this.props.presentRegion);\r\n       \r\n    }\r\n\r\n    async getData(region)\r\n    {\r\n      let url =\"\";\r\n\r\n      if(region === 'World')\r\n        url = \"https://coronavirus-19-api.herokuapp.com/countries\";\r\n      else\r\n        url = \"https://covid-india-cases.herokuapp.com/states/\";\r\n\r\n      await fetch(url)\r\n        .then(response => response.json())\r\n        .then(data => {this.sortData(data,region);  \r\n      });\r\n      \r\n    }\r\n\r\n    sortData(data,region)\r\n    {\r\n        var totalCases =0; var obj=[],name=\"\";\r\n        if(region === 'World'){\r\n           name=\"Countries\";\r\n           totalCases = data.splice(0,1);\r\n           obj=data.splice(0,5);\r\n           obj.forEach(element => {\r\n             element[\"percentage\"] = (element.cases/totalCases[0].cases)*100;\r\n             element[\"place\"] = element.country;\r\n           });\r\n        }\r\n        else{\r\n          let ar =[];\r\n           data.forEach(x=>{\r\n             ar.push(parseInt(x.noOfCases));\r\n             totalCases+=x.noOfCases;\r\n              // obj.push({\"place\": x.state,\"cases\":x.noOfCases})\r\n           });\r\n           ar.sort(function(a, b){return b - a});\r\n           \r\n           ar.forEach(x=>{\r\n             data.forEach(elem =>{\r\n               if(elem.noOfCases == x) obj.push({place: elem.state,cases:x,percentage:(x/totalCases)*100});\r\n             })\r\n           })\r\n           obj = obj.splice(0,5);\r\n           name=\"States\";\r\n        }\r\n  \r\n        this.setState({data: obj,name:name});\r\n\r\n    }\r\n\r\n    render()\r\n    {\r\n        return(\r\n           <div className=\"col-xl-3 col-md-4\">\r\n              <div className=\"card\" style={{height:'360px'}}>\r\n        <div className=\"card-header\">5 Most Affected {this.state.name}</div>\r\n                <div className=\"card-body\">\r\n                  { this.state.data.map(name => ( \r\n                     <div key={name.country}>\r\n                       <span  style={{float:'left'}}>{name.place}</span>  <span style={{float:\"right\"}}>{name.cases.toLocaleString()}</span><br></br>\r\n                       <ProgressBar value={name.percentage} showValue ={false} style={{height:'5px'}} />\r\n                       <br></br>\r\n                     </div>   ))}\r\n                </div>\r\n              </div>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nexport default AffectedCountries;"]},"metadata":{},"sourceType":"module"}